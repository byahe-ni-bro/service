<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="style.css">
	<link rel="icon" href="img/logo.png">
	<script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"></script>
	<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
</head>

<style>
	.container{
		position: relative;
		top: 20%;
	}
	.bg{
		height: auto;
		padding-top: 150px;
		padding-bottom: 100px;
	}
	.form{
		border: solid 1px #CC5B19;
		padding: 5px; 
		font-size: 14px;
		width: 100%; /* take up the entire width of its container */
		  border-collapse: collapse; /* optional: to remove any default spacing between borders */
	}
	.info-header{
		background-color: #CC5B19;
		color: white;
	}
	.pdf-background{
		background-color: white;
		max-width: 800px;  /* limit the max width */
		width: 100%; /* takes the full width of its container */
		margin: auto;
		padding: 1rem; /* padding for some space */
	}
	.table{
		padding-top: 10px;
		padding-bottom: 50px;
		margin: 50px;
	}

	.form td{
		height: 45px;
	}

	@media screen and (max-width: 932px) {
	.pdf-background {
		max-width: 700px;
	}
	}

	/* Even smaller screens (less than 768px) */
	@media screen and (max-width: 768px) {
	.footer{
		width: 179%;
		height: 155px;
	}
	.container{
			width: 179%;
		}
	body{
		width: 100%;
		height: auto;
		overflow-y: hidden;
	}
	}
</style>

<!-- LOADER -->
<div id="loader">
	<svg class="car" width="102" height="40" xmlns="http://www.w3.org/2000/svg">
		<g transform="translate(2 1)" stroke="#CC5B19" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
			<path class="car__body" d="M47.293 2.375C52.927.792 54.017.805 54.017.805c2.613-.445 6.838-.337 9.42.237l8.381 1.863c2.59.576 6.164 2.606 7.98 4.531l6.348 6.732 6.245 1.877c3.098.508 5.609 3.431 5.609 6.507v4.206c0 .29-2.536 4.189-5.687 4.189H36.808c-2.655 0-4.34-2.1-3.688-4.67 0 0 3.71-19.944 14.173-23.902zM36.5 15.5h54.01" stroke-width="3"/>
			<ellipse class="car__wheel--left" stroke-width="3.2" fill="#FFF" cx="83.493" cy="30.25" rx="6.922" ry="6.808"/>
			<ellipse class="car__wheel--right" stroke-width="3.2" fill="#FFF" cx="46.511" cy="30.25" rx="6.922" ry="6.808"/>
			<path class="car__line car__line--top" d="M22.5 16.5H2.475" stroke-width="3"/>
			<path class="car__line car__line--middle" d="M20.5 23.5H.4755" stroke-width="3"/>
			<path class="car__line car__line--bottom" d="M25.5 9.5h-19" stroke-width="3"/>
		</g>
	</svg>
</div>
<!-- LOADER END -->

<div id="header">
	<div class="logo-name"><a href="index.html"><img src="img/logo-name2.png"></a></div>
	<div class="topnav" id="myTopnav">
		<div class="none"></div>
		<a href="index.html">HOME</a>
		<a href="cars.html">OUR CARS</a>
		<a href="booking.html" class="active">BOOKING</a>
		<a href="contact.html">CONTACT US</a>
		<a href="javascript:void(0);" class="icon" onclick="myFunction()">
			<i class="fa fa-bars"></i>
		</a>
	</div>
</div>

<div class="bg">
	<div class="container">
		<div class="pdf-background" style="margin: auto;">
			<div class="table" style="text-align: center;" >
				<img src="img/logo.png" width="100px" style="margin-top: 10px;"> 
				<div class="table-header" style="margin-bottom: 10px;">
					<table style="border: none; margin: auto;">
						<tr>
							<th><p style="font-size: 150%; font-family: 'Times New Roman', Times, serif; font-weight: bold;">BYAHE NI BRO</p></th>
						</tr>
						<tr>
							<td>Capt. Ciriaco Nazareno, Naic, Cavite</td>
						</tr>
						<tr>
							<td>0917-130-4678 / smvpcourierservice@gmail.com</td>
						</tr>
					</table>
				</div>

			<table rules="all" style="background-color: white; margin:auto;" class="form">
				<tr style="text-align: left;">
					<th>DATE</th>
					<td colspan="5" id="currentDate"></td>
				</tr>
				<tr class="info-header">
					<td colspan="100%"><b>CLIENT INFORMATION</b></td>
				</tr>
				<tr>
					<td><b>First Name</b></td>
					<td><p id="firstName"></p></td>
					<td><b>Middle Name</b></td>
					<td><p id="middleName"></p></td>
					<td><b>Last Name</b></td>
					<td><p id="lastName"></p></td>
				</tr>
				<tr>
					<td><b>Address</b></td>
					<td><p id="clientAddress"></p></td>
					<td><b>Contact No.</b></td>
					<td><p id="clientNo."></p></td>
					<td><b>Email</b></td>
					<td><p id="clientEmail"></p></td>
				</tr>
				<tr class="info-header">
					<td colspan="100%"><b>CAR INFORMATION</b></td>
				</tr>
				<tr>
					<th colspan="2">Car Brand</th>
					<th colspan="2">Pick-Up Location</th>
					<th colspan="2">Drop-Off Location</th>
					
				</tr>
				<tr style="text-align: center;">
					<td colspan="2"><p id="carType"></p></td>
					<td colspan="2"><p id="pickupArea"></p></td>
					<td colspan="2"><p id="dropoffArea"></p></td>
				</tr>
				<tr class="info-header">
					<td colspan="100%"><b>DESTINATION INFORMATION</b></td>
				</tr>
				<tr>
					<th colspan="2">Destination 1</th>
					<th colspan="2">Pick-Up Time</th>
					<th colspan="2">Drop-Off Time</th>
					
				</tr>
				<tr style="text-align: center;">
					<td colspan="2"><p id="destination1"></p></td>
					<td colspan="2"><p id="pickUp1"></p></td>
					<td colspan="2"><p id="dropOff1"></p></td>
				</tr>
				<tr>
					<th colspan="2">Destination 2</th>
					<th colspan="2">Pick-Up Time</th>
					<th colspan="2">Drop-Off Time</th>
					
				</tr>
				<tr style="text-align: center;">
					<td colspan="2"><p id="destination2"></p></td>
					<td colspan="2"><p id="pickUp2"></p></td>
					<td colspan="2"><p id="dropOff2"></p></td>
				</tr>
				<tr>
					<th colspan="2">Destination 3</th>
					<th colspan="2">Pick-Up Time</th>
					<th colspan="2">Drop-Off Time</th>
					
				</tr>
				<tr style="text-align: center;">
					<td colspan="2"><p id="destination3"></p></td>
					<td colspan="2"><p id="pickUp3"></p></td>
					<td colspan="2"><p id="dropOff3"></p></td>
				</tr>
				<tr>
					<th style="background-color: #d66523; color: white;">Self Drive</th><td></td>
				</tr>
				<tr>
					<th style="background-color: #d66523; color: white;">W/ Driver</th><td>&#x2714;</td>
					<td colspan="4" style="border-top: none;"> ________________________________<br>
						Signature
					</td>
				</tr>
			</table>
			</div>
		</div>
			<br>
		<div class="submit-container">
			<center>
			<p style="color: black; text-shadow: 0px 1px white;"><b>Do you confirm this information?</b></p>
			<button id="send-email">Yes (Submit)</button> <button><a href="self-form.html" style="text-decoration: none; color: white;">No (Retry)</a></button><button id="download" style="margin-left: 4px;">Download PDF</button>
			</center>
		</div>
	</div>
</div>

<div class="footer clearfix">
	<div class="footer-obj">
		<div class="footer-text">Â© 2023 Byahe ni Bro | All rights reserved</div>
		<div class="footer-icons">
			<a href="https://www.facebook.com/profile.php?id=100095017235749&mibextid=9R9pXO" target="_blank"><box-icon name='facebook' type='logo' color='#ffffff' ></box-icon></a>
			<a href="https://www.youtube.com/@Byaheronibro" target="_blank"><box-icon name='youtube' type='logo' color='#ffffff' ></box-icon></a>
			<a href="mailto:byahenibroservice@gmail.com"><box-icon name='gmail' type='logo' color='#ffffff' ></box-icon></a>
		</div>
	</div>
</div>

		<!-- Start of LiveChat (www.livechat.com) code -->
<script>
    window.__lc = window.__lc || {};
    window.__lc.license = 15912930;
    ;(function(n,t,c){function i(n){return e._h?e._h.apply(null,n):e._q.push(n)}var e={_q:[],_h:null,_v:"2.0",on:function(){i(["on",c.call(arguments)])},once:function(){i(["once",c.call(arguments)])},off:function(){i(["off",c.call(arguments)])},get:function(){if(!e._h)throw new Error("[LiveChatWidget] You can't use getters before load.");return i(["get",c.call(arguments)])},call:function(){i(["call",c.call(arguments)])},init:function(){var n=t.createElement("script");n.async=!0,n.type="text/javascript",n.src="https://cdn.livechatinc.com/tracking.js",t.head.appendChild(n)}};!n.__lc.asyncInit&&e.init(),n.LiveChatWidget=n.LiveChatWidget||e}(window,document,[].slice))
</script>
<noscript><a href="https://www.livechat.com/chat-with/15912930/" rel="nofollow">Chat with us</a>, powered by <a href="https://www.livechat.com/?welcome" rel="noopener nofollow" target="_blank">LiveChat</a></noscript>
<!-- End of LiveChat code -->

    <script src="script.js"></script>
	<script>
		// Fetch data from localStorage and display it
		window.onload = function() {
			const outputfirstName = document.getElementById("firstName");
			const outputmiddleName = document.getElementById("middleName");
			const outputlastName = document.getElementById("lastName");
			const outputclientAddress = document.getElementById("clientAddress");
			const outputclientNo = document.getElementById("clientNo.");
			const outputclientEmail = document.getElementById("clientEmail");
			const outputcarType = document.getElementById("carType");
			const outputpickupArea = document.getElementById("pickupArea");
			const outputdropoffArea = document.getElementById("dropoffArea");
			const outputdestination1 = document.getElementById("destination1");
			const outputpickUp1 = document.getElementById("pickUp1");
			const outputdropOff1 = document.getElementById("dropOff1");
			const outputdestination2 = document.getElementById("destination2");
			const outputpickUp2 = document.getElementById("pickUp2");
			const outputdropOff2 = document.getElementById("dropOff2");
			const outputdestination3 = document.getElementById("destination3");
			const outputpickUp3 = document.getElementById("pickUp3");
			const outputdropOff3 = document.getElementById("dropOff3");

			
			// Fetch each form field from localStorage
			const firstName = localStorage.getItem("firstName");
			const middleName = localStorage.getItem("middleName");
			const lastName = localStorage.getItem("lastName");
			const clientAddress = localStorage.getItem("clientAddress");
			const clientNo = localStorage.getItem("clientNo");
			const clientEmail = localStorage.getItem("clientEmail");
			const carType = localStorage.getItem("carType");
			const pickupArea = localStorage.getItem("pickupArea");
			const dropoffArea = localStorage.getItem("dropoffArea");
			const destination1 = localStorage.getItem("destination1");
			const pickUp1 = localStorage.getItem("pickUp1");
			const dropOff1 = localStorage.getItem("dropOff1");
			const destination2 = localStorage.getItem("destination2");
			const pickUp2 = localStorage.getItem("pickUp2");
			const dropOff2 = localStorage.getItem("dropOff2");
			const destination3 = localStorage.getItem("destination3");
			const pickUp3 = localStorage.getItem("pickUp3");
			const dropOff3 = localStorage.getItem("dropOff3");
	
			if (firstName) {
				outputfirstName.innerHTML += `${firstName}`;
			}
			if (middleName) {
				outputmiddleName.innerHTML += `${middleName}`;
			}
			if (lastName) {
				outputlastName.innerHTML += `${lastName}`;
			}
			if (clientAddress) {
				outputclientAddress.innerHTML += `${clientAddress}`;
			}
			if (clientNo) {
				outputclientNo.innerHTML += `${clientNo}`;
			}
			if (clientEmail) {
				outputclientEmail.innerHTML += `${clientEmail}`;
			}
			if (carType) {
				outputcarType.innerHTML += `${carType}`;
			}
			if (pickupArea) {
				outputpickupArea.innerHTML += `${pickupArea}`;
			}
			if (dropoffArea) {
				outputdropoffArea.innerHTML += `${dropoffArea}`;
			}
			if (destination1) {
				outputdestination1.innerHTML += `${destination1}`;
			}
			if (pickUp1) {
				outputpickUp1.innerHTML += `${pickUp1}`;
			}
			if (dropOff1) {
				outputdropOff1.innerHTML += `${dropOff1}`;
			}
			if (destination2) {
				outputdestination2.innerHTML += `${destination2}`;
			}
			if (pickUp2) {
				outputpickUp2.innerHTML += `${pickUp2}`;
			}
			if (dropOff2) {
				outputdropOff2.innerHTML += `${dropOff2}`;
			}
			if (destination3) {
				outputdestination3.innerHTML += `${destination3}`;
			}
			if (pickUp3) {
				outputpickUp3.innerHTML += `${pickUp3}`;
			}
			if (dropOff3) {
				outputdropOff3.innerHTML += `${dropOff3}`;
			}
		}
	</script>

	<script>
		let today = new Date();

		// You can format the date as desired, e.g., "MM/DD/YYYY"
		let formattedDate = (today.getMonth() + 1) + '/' + today.getDate() + '/' + today.getFullYear();

		document.getElementById('currentDate').innerText = formattedDate;
	</script>

	<script>
		document.getElementById('download').addEventListener('click', function(){
    var element = document.querySelector('.pdf-background');

    var opt = {
        margin:       0,
        filename:     'booking-form.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    // Create the PDF
    html2pdf().from(element).set(opt).save();
});

	</script>

	<script>
		document.getElementById('send-email').addEventListener('click', function () {
    var element = document.querySelector('.pdf-background');

    var opt = {
        margin:       0,
        filename:     'booking-form.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };
    html2pdf().from(element).set(opt).outputPdf().then(function(pdf) {
        // Convert PDF to base64
        var pdfBase64 = btoa(pdf);

        // Initialize EmailJS
        emailjs.init("PGzj5Ld9ngUx9_Sjw");

        // Parameters for the email
		var firstName = document.getElementById("firstName").innerText.trim();
		var middleName = document.getElementById("middleName").innerText.trim();
		var lastName = document.getElementById("lastName").innerText.trim();
		var clientAddress = document.getElementById("clientAddress").innerText.trim();
		var clientNo = document.getElementById("clientNo.").innerText.trim();
		var clientEmail = document.getElementById("clientEmail").innerText.trim();
		var carType = document.getElementById("carType").innerText.trim();
		var pickupArea = document.getElementById("pickupArea").innerText.trim();
		var dropoffArea = document.getElementById("dropoffArea").innerText.trim();
		var destination1 = document.getElementById("destination1").innerText.trim();
		var pickUp1 = document.getElementById("pickUp1").innerText.trim();
		var dropOff1 = document.getElementById("dropOff1").innerText.trim();
		var destination2 = document.getElementById("destination2").innerText.trim();
		var pickUp2 = document.getElementById("pickUp2").innerText.trim();
		var dropOff2 = document.getElementById("dropOff2").innerText.trim();
		var destination3 = document.getElementById("destination3").innerText.trim();
		var pickUp3 = document.getElementById("pickUp3").innerText.trim();
		var dropOff3 = document.getElementById("dropOff3").innerText.trim();

        var params = {
            to_email: "byahenibroservice@gmail.com",
            from_name: "Client",
			reply_to: clientEmail,
            message: "Here's my request form for a vehicle booking.",

			firstName: firstName,
			middleName: middleName,
			lastName: lastName,
			clientAddress: clientAddress,
			clientNo: clientNo,
			clientEmail: clientEmail,
			carType: carType,
			pickupArea: pickupArea,
			dropoffArea: dropoffArea,
			destination1: destination1,
			pickUp1: pickUp1,
			dropOff1: dropOff1,
			destination2: destination2,
			pickUp2: pickUp2,
			dropOff2: dropOff2,
			destination3: destination3,
			pickUp3: pickUp3,
			dropOff3: dropOff3,
        };

        // Send the email
        emailjs.send("service_9bwwzrt", "template_20fqkxe", params)
            .then(function(response) {
                console.log("Email sent:", response);
                alert("Email sent successfully!");
            }, function(error) {
                console.error("Email error:", error);
                alert("Error sending email.");
            });
    });
});

	</script>
	
    </body>
</html>